Syst√®me de gestion des uploads :

    Configuration des routes d'upload
    Validation des fichiers
    Gestion des m√©tadonn√©es

    √Ä faire :

        Route POST /upload qui permet √† un r√©alisateur de t√©l√©verser une vid√©o.

        Stockage direct vers un cloud (comme AWS S3 ou GCP Storage).

        Renvoyer l‚ÄôURL une fois l‚Äôupload termin√©.

        Une fois le fichier upload√©, d√©clencher le transcodage.

Syst√®me de transcodage :

    Configuration du service de transcodage
    Gestion des diff√©rentes qualit√©s vid√©o
    Gestion des formats (HLS/DASH)

    √Ä faire :

        Script transcoder.js qui re√ßoit une vid√©o et la convertit (par exemple en HLS).

        Peut √™tre fait localement avec ffmpeg, ou dans le cloud avec un service (MediaConvert, etc.)

        Stocker les fichiers transcod√©s dans le cloud, et garder les URLs pour le streaming.

Syst√®me de streaming :

    Configuration des routes pour le streaming
    Gestion des chunks vid√©o
    Gestion du streaming adaptatif

    √Ä faire :

        Route GET /stream/:videoId ‚Üí retourne l'URL du fichier .m3u8.

        Middleware pour v√©rifier si l‚Äôutilisateur a acc√®s (coins, abonnement‚Ä¶).

        Utilise un CDN si possible (CloudFront, etc.).

Syst√®me de coins et paiements :

    Configuration de l'int√©gration avec Stripe
    Gestion des transactions de coins
    Gestion des abonnements

# Statistiques des utilisateurs
curl -X GET http://localhost:3000/api/admin/stats/users \
-H "Authorization: Bearer VOTRE_TOKEN_ADMIN"

# Statistiques des revenus (30 derniers jours)
curl -X GET http://localhost:3000/api/admin/stats/revenue?period=30 \
-H "Authorization: Bearer VOTRE_TOKEN_ADMIN"

# Statistiques du contenu
curl -X GET http://localhost:3000/api/admin/stats/content \
-H "Authorization: Bearer VOTRE_TOKEN_ADMIN"

# Statistiques d'engagement
curl -X GET http://localhost:3000/api/admin/stats/engagement \
-H "Authorization: Bearer VOTRE_TOKEN_ADMIN"

# Statistiques des r√©alisateurs
curl -X GET http://localhost:3000/api/admin/stats/directors?period=30 \
-H "Authorization: Bearer VOTRE_TOKEN_ADMIN"

StatsAdmin
    Utilisateurs (auth)
        Nombre total d'utilisateurs
        Nouveaux utilisateurs par p√©riode
        Utilisateurs actifs/inactifs
        Distribution des r√¥les
    Contenu (episodes, movies)
        Nombre total d'√©pisodes/films
        Contenu ajout√© par p√©riode
        Contenu le plus populaire
        Taux de conversion (vues/achats)
    Mon√©tisation (payments, coins)
        Revenus totaux
        Revenus par p√©riode
        Distribution des types de paiement
        Taux de conversion des abonnements
    Engagement (favorites, history, like)
        Nombre total de favoris
        Temps de visionnage moyen
        Taux d'engagement
        Contenu le plus aim√©
    Performance (upload, transcode)
        Temps moyen de traitement
        Taux de succ√®s des uploads
        Utilisation du stockage
        Qualit√© des transcodages


1. R√®gle de r√©mun√©ration par vue

    Prix de r√©f√©rence‚ÄØ: 0,6 FCFA par vue d‚Äô√©pisode.

2. Cat√©gories de films et pourcentages de r√©mun√©ration

    Exclusivit√©s SCROLLEO‚ÄØ: 50‚ÄØ% (puis 20‚ÄØ% apr√®s 2 ans)
    Tr√®s r√©cents (<2 ans)‚ÄØ: 35‚ÄØ% (puis 20‚ÄØ% apr√®s 2 ans)
    R√©cents (2 √† 5 ans)‚ÄØ: 30‚ÄØ% (puis 20‚ÄØ% apr√®s 2 ans)
    Anciens (5 √† 20 ans)‚ÄØ: 20‚ÄØ%
    La r√©mun√©ration r√©elle = nombre de vues √ó 0,6 FCFA √ó pourcentage selon la cat√©gorie.

3. D√©gressivit√©

    Apr√®s 2 ans, toutes les cat√©gories passent √† 20‚ÄØ%.

*** revenu = nombre de vues √ó 0,6 FCFA √ó (pourcentage cat√©gorie / 100) ***

    Il faut recuperer :
    
        - Le nombre de vues (dans la p√©riode voulue)
        - Le film parent et sa cat√©gorie
        - La date de sortie du film (pour savoir si >2 ans)
        - Le pourcentage √† appliquer (cat√©gorie + d√©gressivit√©)

psql -U postgres -d streaming_platform (connexion a la base de donnee)

psql -U postgres -d streaming_platform -f src/migrations/create_uploads_table.sql 

TRUNCATE TABLE uploads, episodes, movies RESTART IDENTITY CASCADE(Supprimer les donnees)

Pour voir les donn√©es d‚Äôune table (exemple‚ÄØ: movies)‚ÄØ: 
    SELECT * FROM movies;

Pour voir la liste des tables
    \dt 
    \d  movies

Supprimer une table

    DROP TABLE episodes CASCADE;
dependances 

    npm install @paypal/checkout-server-sdk bull




üí° Comment impl√©menter la d√©sactivation / retrait du consentement ?
1. Afficher un √©cran ou une pop-up de consentement au lancement

    D√®s la premi√®re ouverture : "Acceptez-vous que l‚Äôapp collecte des statistiques d‚Äôusage anonymes ?"

    Boutons : ‚úÖ Oui | ‚ùå Non

2. Ajouter un bouton dans les param√®tres utilisateur

    Exemple : Param√®tres > Confidentialit√©

        ‚úÖ [ ] Autoriser la collecte anonyme de donn√©es

        ‚úÖ [ ] Activer les recommandations personnalis√©es

3. G√©rer le retrait

    Si l‚Äôutilisateur retire son consentement :

        Supprimer les donn√©es d√©j√† collect√©es (si n√©cessaire)

        Ne plus envoyer certaines donn√©es au backend


| **√âl√©ment**                           | **Valeur**                                                                   |
| ------------------------------------- | ---------------------------------------------------------------------------- |
| **Protocole de s√©curit√©**             | TLS (Transport Layer Security) ‚Äì version 1.3                                 |
| **Nom de domaine s√©curis√©**           | `https://streaming-platform.onrender.com` *(ou nom de domaine personnalis√©)* |
| **B√©n√©ficiaire du certificat**        | La plateforme de streaming (domaine principal et ses sous-domaines)          |
| **Autorit√© de certification**         | Let's Encrypt                                                                |
| **Type de signature num√©rique**       | SHA-256 avec cl√© RSA                                                         |
| **Sous-domaines couverts**            | Oui ‚Äì ex : `www.`, `api.`, `admin.`                                          |
| **Date d‚Äô√©mission**                   | Automatique √† la mise en ligne (renouvellement tous les 90 jours)            |
| **Date d‚Äôexpiration**                 | 90 jours apr√®s √©mission (renouvellement automatique)                         |
| **Infrastructure SSL compl√©mentaire** | Fournie par Render (et √©ventuellement Cloudflare pour le CDN)                |
